<meta charset="UTF-8">
<html>
	<div id="schedule">
	</div>

	<div id="ids"></div>

	<style type="text/css">
		#ids {
			width: 200px;
			float: right;
		}

		#ids:before{
			content: "Sessions";
			font-weight: bold;
		}

		.session {
			padding: 10px;
			border: #000 solid 1px;
			margin: 2px;
		}

	</style>

	<script src="jquery-2.0.3.min.js"></script>
	<script src="handlebars-v1.3.0.js"></script>
	<script type="text/javascript">

	function retrieveSessions() {
		var address = "accepted_sessions.json";
		$.getJSON(address)
		.done(function(sessions) {
			$.each(sessions, function(i, session) {
				$("<div class='session'>" + session.id + "</div>").appendTo("#ids");
			});
		})
		.fail(function() {
			console.log("error retrieving sessions");
		});
	}

	function tweakDates() {
		Date.prototype.addHalfHour = function() {
			this.setTime(this.getTime() + 30 * 60 * 1000);
		};
		Date.prototype.dateToJSON = function() {
			return this.toJSON().substring(0, 11);
		};
		Date.prototype.timeToJSON = function() {
			return this.toLocaleTimeString().substring(0,5);
		};
	}

	function buildTable() {
		var date = new Date(2014, 11, 5, 9, 0)
		var table = $("<table>").attr("data-date", date.dateToJSON());

		while(date.getHours() < 19) {
			var tr = $("<tr>").attr("date-time", date.timeToJSON());
			
			date.addHalfHour();
		}
	}

	retrieveSessions();	
	tweakDates();
	buildTable();
	</script>

</html>