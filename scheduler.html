<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="scheduler.css">
</head>
<body>
	<div id="schedule">
	</div>

	<div id="ids"></div>

	<script src="jquery-2.0.3.min.js"></script>
	<script src="DateExtensions.js"></script>
	<script src="Session.js"></script>
	<script src="TableBuilder.js"></script>

	<script type="text/javascript">
		var sessions = [];

		function retrieveSessions() {
			var address = "accepted_sessions.json";
			$.getJSON(address)
			.done(function(accepted_sessions) {
				$.each(accepted_sessions, function(i) {
					var session = new Session(this);
					if (!session.allocated()) {
						$("<div>" + session.id + "</div>")
									.attr("class", "session 30minutes")
									.appendTo("#ids");
					} else {
						session.positionYourself();
					}
					sessions.push(session);
				});
			})
			.fail(function() {
				console.log("error retrieving accepted_sessions");
			});
		}

		// main
		var tableBuilder = new TableBuilder();
		tableBuilder.build(new Date(2013, 5, 26, 9, 0));
		tableBuilder.build(new Date(2013, 5, 27, 9, 0));
		tableBuilder.build(new Date(2013, 5, 28, 9, 0));

		retrieveSessions();	
	</script>
</body>
</html>